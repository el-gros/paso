<!--
<head><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /></head>
-->
<ion-content>

  <!-- buttons to select start / stop recording or save track -->

  <ion-fab slot="fixed" horizontal="center" vertical="top">
    <ion-row>
      <ion-fab-button id='start' (click)="startTracking()">
        <ion-icon name="play"></ion-icon>
      </ion-fab-button>  
      <ion-fab-button id='stop' (click)="confirm('Stop track', ' stop the track?', 'stop')">
        <ion-icon name="stop"></ion-icon>
      </ion-fab-button>  
      <ion-fab-button id='save' (click)="setTrackDetails()">
        <ion-icon name="save"></ion-icon>
      </ion-fab-button>  
      <ion-fab-button id='trash' (click)="confirm('Delete track', ' permanently delete the track?', 'remove')">
        <ion-icon name="trash-outline"></ion-icon>
      </ion-fab-button>  
      <ion-fab-button id='databutton' (click)="gotoData()">
        <ion-icon name="analytics-outline"></ion-icon>
      </ion-fab-button>  
      <ion-fab-button id='mapbutton' (click)="gotoMap()">
        <ion-icon name="map-outline"></ion-icon>
      </ion-fab-button>  
      <ion-fab-button id='list' (click)="gotoPage('tab2')">
        <ion-icon name="list-outline"></ion-icon>
      </ion-fab-button>  
      <ion-fab-button id='settings' (click)="gotoPage('tab3')">
        <ion-icon name="settings-outline"></ion-icon>
      </ion-fab-button>  
    </ion-row>
  </ion-fab>
  
<div id="map" class="map-container"></div>

<swiper-container id="data">
  <swiper-slide>
    <div class = 'empty'></div>  
    <div class = 'element card' *ngIf="currentTrack">
      CURRENT ROUTE<br>
      Distance: {{currentTrack.features[0].properties.totalDistance | number:'1.3' }} km<br>
      Elevation gain: {{currentTrack.features[0].properties.totalElevationGain | number:'1.0-0' }} m<br>
      Elevation loss: {{currentTrack.features[0].properties.totalElevationLoss | number:'1.0-0' }} m<br>
      Time: {{ currentTrack.features[0].properties.totalTime }}<br>
      Time in motion: {{ currentMotionTime }}<br> 
      {{ currentTrack.features[0].properties.totalNumber}} points recorded<br><br>
      Current elevation: <ng-container *ngIf="currentTrack.features[0].properties.currentAltitude !== undefined">{{ currentTrack.features[0].properties.currentAltitude | number:'1.0-0' }} m</ng-container><br>
      Current speed: <ng-container *ngIf="currentTrack.features[0].properties.currentSpeed !== undefined">{{ currentTrack.features[0].properties.currentSpeed | number:'1.1-1' }} km/h</ng-container><br>
      Average speed: <ng-container *ngIf="currentAverageSpeed != undefined">{{currentAverageSpeed | number:'1.1-1'}} km/h</ng-container><br>
      In-motion average speed: <ng-container *ngIf="currentMotionSpeed != undefined">{{currentMotionSpeed | number:'1.1-1'}} km/h</ng-container><br>
      <div *ngIf="archivedTrack" [style.color]="statusMessage.color">{{ statusMessage.text }}</div>
    </div>
    <div class = 'element card' *ngIf="archivedTrack && layerVisibility=='archived'">
      REFERENCE ROUTE<br>
      {{archivedTrack.features[0].properties.name}}<br>
      Distance: <ng-container *ngIf="archivedTrack.features[0].properties.totalDistance !== undefined">
        {{archivedTrack.features[0].properties.totalDistance | number:'1.3' }} km</ng-container><br>
      Elevation gain: <ng-container *ngIf="archivedTrack.features[0].properties.totalElevationGain !== undefined">
        {{archivedTrack.features[0].properties.totalElevationGain | number:'1.0-0' }} m</ng-container><br>
      Elevation loss: <ng-container *ngIf="archivedTrack.features[0].properties.totalElevationLoss !== undefined">
        {{archivedTrack.features[0].properties.totalElevationLoss | number:'1.0-0' }} m</ng-container><br>
      Time: <ng-container *ngIf="archivedTrack.features[0].properties.totalTime !== undefined">
        {{ archivedTrack.features[0].properties.totalTime }}</ng-container><br>
      {{ archivedTrack.features[0].properties.totalNumber}} points recorded<br>
    </div>  
  </swiper-slide>
  <swiper-slide>
    <div class = 'empty'></div>  
    <div class = 'element' id ='cc0'>
      <h1 class = 'title'>ALTITUDE (m) vs distance (km)</h1>
      <canvas class = 'canvas' id="currentCanvas0" width="{{canvasNum}}" height="{{canvasNum}}"></canvas>
    </div>
    <div class = 'element' id="ac0">
      <h1 class = 'title'>ALTITUDE (m) vs distance (km)</h1>
      <canvas class = 'canvas' id="archivedCanvas0" width="{{canvasNum}}" height="{{canvasNum}}"></canvas>
    </div>  
  </swiper-slide>  
  <swiper-slide>
    <div class = 'empty'></div>
    <div class = 'element' id="cc1">  
      <h1 class = 'title'>SPEED (km/h) vs time ({{currentUnit}})</h1>
      <canvas class = 'canvas' id="currentCanvas1" width="{{canvasNum}}" height="{{canvasNum}}"></canvas>
    </div>
    <div class = 'element' id="ac1">  
      <h1 class = 'title'>SPEED (km/h) vs time ({{archivedUnit}})</h1>
      <canvas class = 'canvas' id="archivedCanvas1" width="{{canvasNum}}" height="{{canvasNum}}"></canvas>
    </div>
  </swiper-slide> 
</swiper-container>    
        
</ion-content>

