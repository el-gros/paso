<ion-header>
  <ion-toolbar>
    <ion-title id="title">{{ 'ARCHIVE.TRACKS' | translate  }}</ion-title>
    <ion-buttons slot="end">
      <ion-button class="header-button" shape="round" fill="solid" (click)="openMenu()">
        <ion-icon slot="icon-only" name="menu"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="custom-content">
  <div class="ion-content-scroll-host">
    <ion-list>
      @for (item of fs.collection; track item) {
        <ion-item>
          <ion-checkbox
            slot="start"
            justify="space-between"
            [(ngModel)]="item.isChecked"
            (ionChange)="onChange()"
            labelPlacement="end"
          >
            <ion-label [ngClass]="item.isChecked ? 'checked' : 'unchecked'">
              {{ item.name }}<br>
              {{ item.date | date: 'dd-MM-yyyy HH:mm' }}<br>
              {{ item.place }}
            </ion-label>
          </ion-checkbox>
        </ion-item>
      }
    </ion-list>
  </div>

  <div class="safe-area"></div>

  <ion-menu side="start" contentId="main-content">
    <ion-content>
      <ion-list>
        <ion-item class="menu-button" button [disabled]='(!fs.presentSearch)' (click)="removeSearch()">{{'ARCHIVE.REMOVE_SEARCH' | translate}}</ion-item>
        <ion-item class="menu-button" button [disabled]='(numChecked != 1)' (click)="exportTrackFile()">{{'ARCHIVE.EXPORT_FILE' | translate}}</ion-item>
        <ion-item class="menu-button" button [disabled]='(numChecked != 1)' (click)="prepareImageExport()">{{'ARCHIVE.EXPORT_TRACK' | translate}}</ion-item>
        <ion-item class="menu-button" button [disabled]="(fs.layerVisibility == 'multi')" (click)="displayAllTracks(true)">{{'ARCHIVE.DISPLAY_ALL' | translate}}</ion-item>
        <ion-item class="menu-button" button [disabled]="(fs.layerVisibility != 'multi')" (click)="displayAllTracks(false)">{{'ARCHIVE.HIDE_ALL' | translate}}</ion-item>
        <ion-item class="menu-button" button [disabled]='(numChecked == 0)' (click)="deleteTracks()">{{'ARCHIVE.REMOVE_TRACKS' | translate}}</ion-item>
        <ion-item class="menu-button" button [disabled]='(numChecked != 1)' (click)="editTrack()">{{'ARCHIVE.EDIT_TRACK' | translate}}</ion-item>
        <ion-item class="menu-button" button [disabled]='(numChecked != 1)' (click)="displayTrack(true)">{{'ARCHIVE.SHOW_REFERENCE' | translate}}</ion-item>
        <ion-item class="menu-button" button [disabled]="(numChecked == 1 || fs.layerVisibility != 'archived' || !fs.archivedPresent)" (click)="displayTrack(false)">{{'ARCHIVE.HIDE_REFERENCE' | translate}}</ion-item>

      </ion-list>
    </ion-content>
  </ion-menu>
  <ion-content id="main-content"></ion-content>
</ion-content>

<!-- space for android controls -->
<div class="bottom-safe-gray"></div>

  <!-- Navigation buttons -->
  <ion-fab
    slot="fixed"
    horizontal="center"
    vertical="bottom"
    class="bottom-safe"
  >
    <ion-row>
      <ion-fab-button (click)="fs.gotoPage('tab1')">
        <ion-icon name="earth"></ion-icon>
      </ion-fab-button>
      <ion-fab-button (click)="fs.gotoPage('canvas')">
        <ion-icon name="analytics"></ion-icon>
      </ion-fab-button>
      <ion-fab-button (click)="fs.gotoPage('settings')">
        <ion-icon name="settings"></ion-icon>
      </ion-fab-button>
    </ion-row>
  </ion-fab>

