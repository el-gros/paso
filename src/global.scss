/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import '@ionic/angular/css/display.css';

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/* Open layer styles */
@import "~ol/ol.css";

// 1. SCALE LINE ////////////////////////////////////

/* 1. Contenedor principal */
.ol-scale-line.vertical-scale {
  display: block !important;
  z-index: 10000 !important;
  position: absolute !important;
  
  /* Ajuste de posici칩n: 60px desde abajo */
  bottom: 25px !important; 
  left: 40px !important; /* Ajusta este valor si queda muy pegado al borde */
  
  background: transparent !important;
  pointer-events: none;

  /* Rotaci칩n */
  transform: rotate(-90deg) !important;
  transform-origin: left bottom !important;
}

/* 2. El cuadro interno (La Regla) */
.ol-scale-line.vertical-scale div,
.ol-scale-line.vertical-scale .vertical-scale-inner,
.ol-scale-line.vertical-scale .ol-scale-line-inner {
  color: #000 !important;
  background: rgba(255, 255, 255, 0.9) !important;
  
  /* 游늺 LA L칈NEA VERTICAL:
     Al estar rotado -90deg, el 'border-bottom' original se convierte 
     en la l칤nea vertical que queda pegada al mapa. */
  border: 1px solid #ccc !important;
  border-bottom: 4px solid #3880ff !important; /* Esta ser치 tu l칤nea vertical azul */
  
  border-radius: 4px 4px 0 0 !important; /* Redondeamos las esquinas opuestas a la l칤nea */
  padding: 4px 10px !important;
  font-size: 11px !important;
  font-weight: bold;
  white-space: nowrap;
  display: flex !important;
  align-items: center;
  justify-content: center;
  
  /* Esto define el largo de la "regla" vertical */
  min-width: 60px !important; 
}

// 2. TOAST //////////////////////////
.toast {
  text-align: center !important; /* Center the text */
  font-size: 16px !important; /* Increase the font size */
}

// 3. CONTROLS ////////////////////////

/* Zoom buttons (top-left by default) */
.ol-zoom {
  top: 25px !important;
  left: 1em;
}

/* Rotate button (top-left by default, below zoom) */
.ol-rotate {
  top: 25px !important; /* push it down so it doesn't overlap */
  right: 1em;
}


/* 1. Forzar que ambos contenedores midan lo mismo */
.location-button-control { 
  position: absolute;
  right: 5px;
  width: 36px;   /* Ancho fijo */
  height: 36px;  /* Alto fijo */
  background-color: white !important;
  border-radius: 4px;
  padding: 0 !important; /* Quitamos paddings que ensanchan el cuadrado */
  margin: 0 !important;
  box-shadow: 0 1px 4px rgba(0,0,0,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden; /* Evita que el contenido se salga */
  pointer-events: auto !important; /* Asegura que el div sea clicable */
  cursor: pointer;
  z-index: 1000; /* Aseg칰rate de que est칠 por encima de las capas del mapa */
}

.location-button-control {
  bottom: 74px; /* Encima del anterior */
}

/* 3. Forzar que los botones internos sean id칠nticos */
.location-button-control button {
  background-color: transparent !important;
  border: none !important;
  width: 100% !important; /* Ocupa todo el contenedor de 36px */
  height: 100% !important;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  outline: none;
}

/* 4. Asegurar que los SVGs tengan el mismo tama침o visual */
.location-button-control svg,
.share-control svg {
  width: 22px;
  height: 22px;
}

/* --- ADN VISUAL: GLASS-MORPHISM CENTRALIZADO --- */

// 1. Bot칩n Universal de Acci칩n (Utilizado en todas las pantallas)
.record-button {
  background: rgba(255, 255, 255, 0.85) !important;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-radius: 20px;
  padding: 8px;
  min-width: 60px;
  min-height: 60px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  transition: all 0.2s ease;
  pointer-events: auto !important;
  cursor: pointer;

  ion-icon {
    font-size: 26px;
    color: var(--ion-color-primary, #3880ff);
    margin-bottom: 4px;
  }

  span, p {
    margin: 0;
    font-size: 9px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: #333;
  }

  &:active {
    transform: scale(0.92);
    background: rgba(255, 255, 255, 0.95) !important;
  }
}

// 2. Contenedores Flotantes (Cards, Listas Inset, Islas de Popover)
:root {
  // Centralizamos los valores para poder cambiarlos en toda la app de un golpe
  --glass-bg: rgba(255, 255, 255, 0.92); 
  --glass-blur: 12px;
  --glass-radius: 28px;
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  --glass-border: 1px solid rgba(255, 255, 255, 0.5);
}

/* ==========================================================================
   1. REGLA MAESTRA (DISE칌O VISUAL COM칔N)
   ========================================================================== */
.glass-panel, .popover-island {
  background: var(--glass-bg, rgba(255, 255, 255, 0.9)) !important;
  backdrop-filter: blur(var(--glass-blur, 12px));
  -webkit-backdrop-filter: blur(var(--glass-blur, 12px));
  border-radius: var(--glass-radius, 28px);
  border: var(--glass-border, 1px solid rgba(255, 255, 255, 0.5));
  box-shadow: var(--glass-shadow, 0 8px 24px rgba(0, 0, 0, 0.15));
  overflow: hidden; 
}

.floating-popover, .confirm-popover {
  --background: transparent;
  --box-shadow: none;
  --width: var(--popover-width, 95%);
  --max-width: var(--popover-max-width, 420px);
}

/* ==========================================================================
   2. REGLAS ESPEC칈FICAS (CONFIGURACI칍N DE CADA PIEZA)
   ========================================================================== */

// 3. Ajustes de Interactividad para FABs
ion-fab {
  pointer-events: none;
  z-index: 1000;
  
  ion-row, .record-button {
    pointer-events: auto;
  }
}

.blue-icon { color: var(--ion-color-primary) !important; }


/* --- 4. COLORES Y ESTADOS GLOBALES --- */

// Estado ACTIVO (Fondo blanco Glass, Texto de color)
.red-pill {
  background: rgba(255, 255, 255, 0.95) !important;
  border: 1px solid rgba(235, 68, 90, 0.4) !important;
  ion-icon, span, p { 
    color: var(--ion-color-danger, #eb445a) !important; 
  }
}

.green-pill {
  background: rgba(255, 255, 255, 0.95) !important;
  ion-icon, span, p { color: var(--ion-color-success, #2dd36f) !important; }
}

/* --- 츼REAS SEGURAS (Zonas del Mapa) --- */
.top-safe, .bottom-safe {
  position: fixed; // Asegura que floten sobre el mapa
  z-index: 999;
  pointer-events: none; // No bloquea el mapa en las zonas vac칤as
  width: 100%;
  display: flex;
  justify-content: center;

  ion-row {
    @extend .glass-panel; // <--- AQU칈 est치 la clave: usa el nuevo ADN visual
    padding: 8px 16px;    // Ajuste espec칤fico de tama침o
    pointer-events: auto; // Permite hacer clic en los botones dentro
    gap: 12px;
  }
}

/* Posicionamiento */
.top-safe { margin-top: 30px; }
.bottom-safe { bottom: 50px; }
.bottom-safe-gray {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  width: 100%;
  height: 50px;
  background-color: #f4f4f4; // Sugerencia: usa el mismo fondo que el slide-wrapper
  z-index: 10;
  border-top: 1px solid rgba(0,0,0,0.05); // Una l칤nea muy fina para separar
}

/* ==========================================================================
   SHARE LOCATION - CORRECCIONES
   ========================================================================== */

/* ==========================================================================
   SHARE LOCATION - VERSI칍N CORREGIDA SIN ERRORES
   ========================================================================== */

.share-control {
  position: absolute;
  right: 5px;
  bottom: 32px !important;
  width: 36px;
  height: 36px;
  background-color: white !important;
  border-radius: 4px;
  padding: 0 !important;
  margin: 0 !important;
  box-shadow: 0 1px 4px rgba(0,0,0,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  pointer-events: auto !important;

  button {
    width: 100% !important;
    height: 100% !important;
    background: transparent !important;
    border: none !important;
    cursor: pointer !important;
    display: flex;
    align-items: center;
    justify-content: center;
    outline: none;
  }
}

.share-control img { 
  width: 22px;
  height: 22px;
  pointer-events: none;
}

/* 2. Backdrop (Fondo oscuro) */
.share-backdrop {
  position: fixed;
  top: 0; 
  left: 0;
  width: 100vw; 
  height: 100vh;
  background: rgba(0,0,0,0.35);
  z-index: 9998;
  display: none; /* Oculto por defecto */
  
  &.active { 
    display: block; /* Se muestra al a침adir la clase .active */
  }
}

/* 3. Popup (Ajuste para que sea compatible con confirm-popover) */
.share-popup {
  position: fixed;
  top: 50%; 
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 9999;
  display: none; /* Oculto por defecto */
  pointer-events: auto;

  &.active { 
    display: block; /* Se muestra al a침adir la clase .active */
  }

  /* Forzamos el estilo de "isla" que ya tienes definido arriba */
  .popover-island {
    min-width: 260px;
    padding: 24px 16px;
  }
}

/* 5. Action Buttons (Yes/No) */
.share-action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 75px;
  height: 75px;
  border: none;
  border-radius: 15px;
  font-weight: 600;
  color: white;
  transition: transform 0.1s;

  img { 
    width: 26px; 
    height: 26px; 
    margin-bottom: 6px; 
  }

  &:active { transform: scale(0.92); }
  
  &.btn-yes { background: #2dd36f; }
  &.btn-no { background: #eb445a; }
}

/* CONFIRM POPOVER */

/* Estilos unificados para Popovers de Acci칩n */
.confirm-popover {
  --width: 260px;
  --border-radius: 16px;
  
  .popover-island.confirm-box {
    padding: 24px 16px;
    text-align: center;
    background: white;
  }

  .confirm-title {
    margin-bottom: 20px;
    font-size: 13px;
    font-weight: 800;
    color: #444;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    line-height: 1.4;
  }

  .button-grid.horizontal {
    display: flex;
    justify-content: center;
    gap: 30px;
  }
 
}

.nav-item-btn {
  background: transparent;
  border: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
  
  ion-icon { font-size: 32px; margin-bottom: 4px; }
  p { margin: 0; font-size: 11px; font-weight: 700; text-transform: uppercase; }
  &:active { transform: scale(0.9); }
  &:disabled {
    opacity: 0.25 !important;    
    filter: grayscale(1);       
    cursor: not-allowed;
    pointer-events: none;       
    
    ion-icon, p {
      color: #888 !important;   
    }
  }
}

